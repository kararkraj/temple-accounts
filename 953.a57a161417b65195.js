"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[953],{1953:(g,l,y)=>{y.d(l,{y:()=>v});var _=y(467),a=y(4262),n=y(2943),T=y(3953),u=y(7291),C=y(5621),E=y(3606);let v=(()=>{var d;class h{constructor(r,e,t,i){this.storage=r,this.fireStore=e,this.auth=t,this.network=i}getCharityTypes(){var r=this;return(0,_.A)(function*(){const e=yield r.storage.get(n.d.CHARITY_TYPES.charityTypes);if(null===e){var t;const i=(0,a.P)((0,a.rJ)(r.fireStore,"charityTypes"),(0,a._M)("createdBy","==",null===(t=r.auth.currentUser)||void 0===t?void 0:t.uid)),o=(yield(0,a.GG)(i)).docs.map(c=>({id:c.id,...c.data()}));return yield r.storage.set(n.d.CHARITY_TYPES.charityTypes,o),o}return e})()}getCharityTypeById(r){var e=this;return(0,_.A)(function*(){const i=(yield e.storage.get(n.d.CHARITY_TYPES.charityTypes)).find(s=>s.id===r);if(i)return i;throw{code:"permission-denied"}})()}addCharityType(r){var e=this;return(0,_.A)(function*(){try{var t;yield e.network.isNetworkConnected();const i=(new Date).toISOString(),s={name:r.name,amount:r.amount,createdBy:null===(t=e.auth.currentUser)||void 0===t?void 0:t.uid,createdAt:i,updatedAt:i},c={id:(yield(0,a.gS)((0,a.rJ)(e.fireStore,"charityTypes"),s)).id,...s},p=yield e.storage.get(n.d.CHARITY_TYPES.charityTypes);return p.push(c),yield e.storage.set(n.d.CHARITY_TYPES.charityTypes,p),c}catch(i){throw i}})()}updateCharityType(r,e){var t=this;return(0,_.A)(function*(){try{yield t.network.isNetworkConnected();const i=(0,a.H9)(t.fireStore,"charityTypes",r);e.updatedAt=(new Date).toISOString(),yield(0,a.mZ)(i,e);const s=yield t.storage.get(n.d.CHARITY_TYPES.charityTypes),o=s.findIndex(c=>c.id===r);return s[o]={...s[o],...e},yield t.storage.set(n.d.CHARITY_TYPES.charityTypes,s),s[o]}catch(i){throw i}})()}deleteCharityType(r){var e=this;return(0,_.A)(function*(){try{yield e.network.isNetworkConnected(),yield(0,a.kd)((0,a.H9)(e.fireStore,"charityTypes",r));const t=yield e.storage.get(n.d.CHARITY_TYPES.charityTypes),i=t.findIndex(o=>o.id===r),s=t.splice(i,1)[0];return yield e.storage.set(n.d.CHARITY_TYPES.charityTypes,t),s}catch(t){throw t}})()}}return(d=h).\u0275fac=function(r){return new(r||d)(T.KVO(u.n),T.KVO(a._7),T.KVO(C.Nj),T.KVO(E.A))},d.\u0275prov=T.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),h})()}}]);