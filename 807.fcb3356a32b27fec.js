"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[807],{9807:(m,c,r)=>{r.d(c,{f:()=>T});var g=r(467),l=r(3953),o=r(1985),n=r(2943),_=r(7291);let T=(()=>{var i;class E{constructor(e){this.storage=e,this.templesUpdatedSignal=(0,l.vPA)(0)}addTemple(e){return new o.c(s=>{this.getTempleNextId().then(d=>{e.id=d,this.storage.get(n.d.TEMPLE.temples).then(t=>{t.push(e),this.storage.set(n.d.TEMPLE.temples,t),this.storage.set(n.d.TEMPLE.lastStoredId,e.id).then(()=>{s.next(e),this.triggerTemplesUpdatedEvent(),s.complete()})})})})}getTemples(){return this.storage.get(n.d.TEMPLE.temples)}getTempleById(e){return new o.c(s=>{this.storage.get(n.d.TEMPLE.temples).then(d=>{const t=d.find(a=>a.id===e);t?s.next(t):s.error("Temple Id not found."),s.complete()})})}getTempleNextId(){var e=this;return(0,g.A)(function*(){return(yield e.storage.get(n.d.TEMPLE.lastStoredId))+1})()}updateTemple(e){const s=e.id;return new o.c(d=>{this.storage.get(n.d.TEMPLE.temples).then(t=>{const a=t.findIndex(p=>p.id===s);t.splice(a,1),t.splice(a,0,e),this.storage.set(n.d.TEMPLE.temples,t).then(()=>{d.next(e),this.triggerTemplesUpdatedEvent(),d.complete()})})})}deleteTemple(e){return new o.c(s=>{this.storage.get(n.d.TEMPLE.temples).then(d=>{const t=d.findIndex(p=>p.id===e),a=d.splice(t,1)[0];this.storage.set(n.d.TEMPLE.temples,d).then(()=>{s.next(a),this.triggerTemplesUpdatedEvent(),s.complete()})})})}triggerTemplesUpdatedEvent(){this.templesUpdatedSignal.update(e=>++e)}}return(i=E).\u0275fac=function(e){return new(e||i)(l.KVO(_.n))},i.\u0275prov=l.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),E})()}}]);