"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[641,953],{641:(C,_,o)=>{o.r(_),o.d(_,{CharityTypesPage:()=>a});var p=o(467),e=o(3953),y=o(177),g=o(4341),s=o(7920),d=o(70),T=o(1953);function u(t,c){if(1&t){const i=e.RV6();e.j41(0,"ion-row")(1,"ion-col"),e.EFF(2),e.k0s(),e.j41(3,"ion-col",8),e.EFF(4),e.k0s(),e.j41(5,"ion-col",8)(6,"ion-buttons",9)(7,"ion-button",10),e.nrm(8,"ion-icon",11),e.k0s(),e.j41(9,"ion-button",12),e.bIt("click",function(){const l=e.eBV(i).$implicit,h=e.XpG();return e.Njj(h.presentDeleteCharityTypeAlert(l))}),e.nrm(10,"ion-icon",13),e.k0s()()()()}if(2&t){const i=c.$implicit;e.R7$(2),e.JRh(i.name),e.R7$(2),e.JRh(i.amount),e.R7$(3),e.FS9("routerLink","edit/"+i.id)}}function n(t,c){1&t&&(e.j41(0,"ion-row",7)(1,"ion-col",14),e.EFF(2,"No entries to show."),e.k0s()())}let a=(()=>{var t;class c{constructor(r,l,h){this.charityTypeService=r,this.alertController=l,this.loader=h,this.charityTypesUpdatedEffect=(0,e.QZP)(()=>{this.charityTypeService.charityTypesUpdatedSignal(),this.getCharityTypes()})}ngOnInit(){}getCharityTypes(){this.charityTypeService.getCharityTypes().then(r=>this.charityTypes=r)}presentDeleteCharityTypeAlert(r){var l=this;return(0,p.A)(function*(){yield(yield l.alertController.create({header:"Confirm delete",subHeader:"Are you sure you want to delete the following record?",message:"Service name: "+r.name,buttons:[{text:"No, Cancel",role:"cancel",handler:()=>{}},{text:"Yes, Delete",role:"confirm",handler:()=>l.deletecharityType(r.id)}]})).present()})()}deletecharityType(r){var l=this;return(0,p.A)(function*(){const h=yield l.loader.create({message:"Deleting service..."});yield h.present(),l.charityTypeService.deleteService(r).subscribe({next:()=>h.dismiss(),error:m=>h.dismiss()})})()}}return(t=c).\u0275fac=function(r){return new(r||t)(e.rXU(T.y),e.rXU(s.hG),e.rXU(s.Xi))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-charity-types"]],standalone:!0,features:[e.aNF],decls:22,vars:1,consts:[["slot","start"],["slot","end"],["color","primary","fill","solid","routerLink","add"],["name","add-outline"],[1,"ion-no-padding","ion-text-center"],[1,"ion-padding"],["size-xs","3","size-md","2",1,"ion-padding"],[1,"no-entries-row"],["size-xs","3","size-md","2"],[1,"ion-justify-content-center"],[3,"routerLink"],["name","create-outline"],[3,"click"],["name","trash-outline"],["size","12",1,"ion-text-center"]],template:function(r,l){1&r&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Services"),e.k0s(),e.j41(6,"ion-buttons",1)(7,"ion-button",2),e.nrm(8,"ion-icon",3),e.EFF(9," Add Service "),e.k0s()()()(),e.j41(10,"ion-content")(11,"ion-grid",4)(12,"ion-row")(13,"ion-col",5),e.EFF(14,"Service Name"),e.k0s(),e.j41(15,"ion-col",6),e.EFF(16,"Amount"),e.k0s(),e.j41(17,"ion-col",6),e.EFF(18,"Actions"),e.k0s()(),e.Z7z(19,u,11,3,"ion-row",null,e.Vm6,!1,n,3,0,"ion-row",7),e.k0s()()),2&r&&(e.R7$(19),e.Dyx(l.charityTypes))},dependencies:[s.hU,s.ln,s.iq,s.Jm,s.QW,s.lO,s.W9,s.eU,s.BC,s.ai,y.MD,g.YN,s.MC,d.Wk],styles:["ion-row[_ngcontent-%COMP%]:first-child{background-color:var(--ion-color-primary);color:#fff}ion-col[_ngcontent-%COMP%]{border-right:solid 1px var(--ion-color-light-shade);border-bottom:solid 1px var(--ion-color-light-shade)}"]}),c})()},1953:(C,_,o)=>{o.d(_,{y:()=>s});var p=o(3953),e=o(1985),y=o(2943),g=o(7291);let s=(()=>{var d;class T{constructor(n){this.storage=n,this.charityTypesUpdatedSignal=(0,p.vPA)(0)}getCharityTypes(){return this.storage.get(y.d.CHARITY_TYPES.charityTypes)}addCharityType(n){return new e.c(a=>{Promise.all([this.storage.get(y.d.CHARITY_TYPES.lastStoredId),this.getCharityTypes()]).then(t=>{const i={...n,id:t[0]+1};t[1].push(i),Promise.all([this.storage.set(y.d.CHARITY_TYPES.charityTypes,t[1]),this.storage.set(y.d.CHARITY_TYPES.lastStoredId,i.id)]).then(r=>{this.triggerCharityTypesUpdatedSignal(),a.next(i),a.complete()})})})}getCharityTypeById(n){return new e.c(a=>{this.getCharityTypes().then(t=>{const c=t.find(i=>i.id===n);c?a.next(c):a.error("Service Id not found."),a.complete()})})}updateCharityType(n){return new e.c(a=>{this.getCharityTypes().then(t=>{const c=t.findIndex(i=>i.id===n.id);t[c]=n,this.storage.set(y.d.CHARITY_TYPES.charityTypes,t).then(i=>{a.next(n),this.triggerCharityTypesUpdatedSignal(),a.complete()})})})}deleteService(n){return new e.c(a=>{this.getCharityTypes().then(t=>{const c=t.findIndex(r=>r.id===n),i=t.splice(c,1)[0];this.storage.set(y.d.CHARITY_TYPES.charityTypes,t).then(r=>{this.triggerCharityTypesUpdatedSignal(),a.next(i),a.complete()})})})}triggerCharityTypesUpdatedSignal(){this.charityTypesUpdatedSignal.update(n=>++n)}}return(d=T).\u0275fac=function(n){return new(n||d)(p.KVO(g.n))},d.\u0275prov=p.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),T})()}}]);