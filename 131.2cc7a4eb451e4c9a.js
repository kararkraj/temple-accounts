"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[131,807],{4565:(T,c,r)=>{r.r(c),r.d(c,{EditTemplePage:()=>E});var u=r(467),e=r(3953),m=r(177),a=r(4341),l=r(7920),g=r(2193),d=r(70);function _(n,i){if(1&n){const o=e.RV6();e.qex(0),e.j41(1,"ion-grid",7)(2,"ion-row")(3,"ion-col")(4,"ion-button",8),e.bIt("click",function(){e.eBV(o);const s=e.XpG();return e.Njj(s.resetForm())}),e.EFF(5,"Reset"),e.k0s()(),e.j41(6,"ion-col")(7,"ion-button",9),e.EFF(8,"Submit"),e.k0s()()()(),e.bVm()}}let E=(()=>{var n;class i extends g.AddTemplePage{constructor(){super(...arguments),this.router=(0,e.WQX)(d.Ix)}ngOnInit(){this.title="Edit Temple",this.templeService.getTempleById(this.templeId).subscribe({next:t=>{this.temple=t,this.templeForm.patchValue(t)},error:t=>{this.toaster.presentToast({message:t,color:"danger"}),this.router.navigate(["tabs/temples"])}})}onSubmit(){var t=this;return(0,u.A)(function*(){if(t.templeForm.valid&&t.templeForm.dirty){const s=yield t.loader.create({message:"Updating temple..."});yield s.present(),t.templeService.updateTemple({id:t.templeId,...t.templeForm.getRawValue()}).subscribe({next:p=>{t.temple=p,t.toaster.presentToast({message:"Temple was updated successfully!",color:"success"}),t.resetForm(),s.dismiss()}})}else t.templeForm.valid?yield t.toaster.presentToast({message:"Nothing to update.",color:"success"}):t.templeForm.markAllAsTouched()})()}resetForm(){this.templeForm.reset(this.temple)}}return(n=i).\u0275fac=(()=>{let o;return function(s){return(o||(o=e.xGo(n)))(s||n)}})(),n.\u0275cmp=e.VBU({type:n,selectors:[["app-edit-temple"]],standalone:!0,features:[e.Vt3,e.aNF],decls:17,vars:4,consts:[["slot","start"],["defaultHref","tabs/temples"],[3,"ngSubmit","formGroup"],["lines","none"],["formControlName","name","label","Temple Name *","label-placement","floating","placeholder","Enter temple name","type","text","name","templeName","required","","maxlength","100","helperText","Only a-z, A-Z and 0-9 characters allowed","errorText","Only a-z, A-Z and 0-9 characters allowed"],["formControlName","address","label","Temple Address *","label-placement","floating","placeholder","Enter temple address","name","templeAddress","required","","maxlength","500","helperText","Only a-z, A-Z, 0-9, comma, ., -` and new line characters allowed","errorText","Only a-z, A-Z, 0-9, comma, ., - and new line characters allowed","rows","3",3,"autoGrow"],[4,"ngIf"],[1,"ion-no-padding"],["expand","full","type","button","color","light",3,"click"],["expand","full","type","submit"]],template:function(t,s){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.k0s()()(),e.j41(6,"ion-content")(7,"form",2),e.bIt("ngSubmit",function(){return s.onSubmit()}),e.j41(8,"ion-item-group")(9,"ion-item-divider")(10,"ion-label"),e.EFF(11,"Temple details:"),e.k0s()(),e.j41(12,"ion-item",3),e.nrm(13,"ion-input",4),e.k0s(),e.j41(14,"ion-item",3),e.nrm(15,"ion-textarea",5),e.k0s()(),e.DNE(16,_,9,0,"ng-container",6),e.k0s()()),2&t&&(e.R7$(5),e.JRh(s.title),e.R7$(2),e.Y8G("formGroup",s.templeForm),e.R7$(8),e.Y8G("autoGrow",!0),e.R7$(),e.Y8G("ngIf",s.canEdit))},dependencies:[l.hU,l.ln,l.lO,m.MD,m.bT,a.X1,a.qT,a.BC,a.cb,a.YS,a.tU,a.j4,a.JD,l.W9,l.eU,l.BC,l.ai,l.Jm,l.nc,l.$w,l.QW,l.uz,l.jh,l.Dg,l.he,l.el],styles:["@media (max-width: 560px){ion-input.amount-input[_ngcontent-%COMP%]{flex:20%}}@media (min-width: 561px) and (max-width: 1000px){ion-input.amount-input[_ngcontent-%COMP%]{flex:60%}}.input-disabled[_ngcontent-%COMP%], .textarea-disabled[_ngcontent-%COMP%]{opacity:.5}"]}),i})()},9807:(T,c,r)=>{r.d(c,{f:()=>g});var u=r(467),e=r(3953),m=r(1985),a=r(2943),l=r(7291);let g=(()=>{var d;class _{constructor(n){this.storage=n,this.templesUpdatedSignal=(0,e.vPA)(0)}addTemple(n){return new m.c(i=>{this.getTempleNextId().then(o=>{n.id=o,this.storage.get(a.d.TEMPLE.temples).then(t=>{t.push(n),this.storage.set(a.d.TEMPLE.temples,t),this.storage.set(a.d.TEMPLE.lastStoredId,n.id).then(()=>{i.next(n),this.triggerTemplesUpdatedEvent(),i.complete()})})})})}getTemples(){return this.storage.get(a.d.TEMPLE.temples)}getTempleById(n){return new m.c(i=>{this.storage.get(a.d.TEMPLE.temples).then(o=>{const t=o.find(s=>s.id===n);t?i.next(t):i.error("Temple Id not found."),i.complete()})})}getTempleNextId(){var n=this;return(0,u.A)(function*(){return(yield n.storage.get(a.d.TEMPLE.lastStoredId))+1})()}updateTemple(n){const i=n.id;return new m.c(o=>{this.storage.get(a.d.TEMPLE.temples).then(t=>{const s=t.findIndex(p=>p.id===i);t.splice(s,1),t.splice(s,0,n),this.storage.set(a.d.TEMPLE.temples,t).then(()=>{o.next(n),this.triggerTemplesUpdatedEvent(),o.complete()})})})}deleteTemple(n){return new m.c(i=>{this.storage.get(a.d.TEMPLE.temples).then(o=>{const t=o.findIndex(p=>p.id===n),s=o.splice(t,1)[0];this.storage.set(a.d.TEMPLE.temples,o).then(()=>{i.next(s),this.triggerTemplesUpdatedEvent(),i.complete()})})})}triggerTemplesUpdatedEvent(){this.templesUpdatedSignal.update(n=>++n)}}return(d=_).\u0275fac=function(n){return new(n||d)(e.KVO(l.n))},d.\u0275prov=e.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),_})()}}]);