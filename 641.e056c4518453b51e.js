"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[641,953],{641:(m,d,c)=>{c.r(d),c.d(d,{CharityTypesPage:()=>n});var _=c(467),e=c(3953),t=c(5751),u=c(9228),p=c(1953),y=c(7990);function h(r,o){if(1&r){const i=e.RV6();e.j41(0,"ion-row")(1,"ion-col"),e.EFF(2),e.k0s(),e.j41(3,"ion-col",8),e.EFF(4),e.k0s(),e.j41(5,"ion-col",8)(6,"ion-buttons",9)(7,"ion-button",10),e.nrm(8,"ion-icon",11),e.k0s(),e.j41(9,"ion-button",12),e.bIt("click",function(){const a=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.presentDeleteCharityTypeAlert(a))}),e.nrm(10,"ion-icon",13),e.k0s()()()()}if(2&r){const i=o.$implicit;e.R7$(2),e.JRh(i.name),e.R7$(2),e.JRh(i.amount),e.R7$(3),e.FS9("routerLink","edit/"+i.id)}}function v(r,o){1&r&&(e.j41(0,"ion-row",7)(1,"ion-col",14),e.EFF(2,"No entries to show."),e.k0s()())}let n=(()=>{var r;class o{constructor(s,a,l){this.charityTypeService=s,this.alertController=a,this.toaster=l,this.charityTypes=[],this.charityTypesEffect=(0,e.QZP)(()=>{this.charityTypes=this.charityTypeService.services()})}ngOnInit(){this.charityTypeService.getCharityTypes()}presentDeleteCharityTypeAlert(s){var a=this;return(0,_.A)(function*(){yield(yield a.alertController.create({header:"Confirm delete",subHeader:"Are you sure you want to delete the following record?",message:"Service name: "+s.name,buttons:[{text:"No, Cancel",role:"cancel",handler:()=>{}},{text:"Yes, Delete",role:"confirm",handler:()=>a.deleteCharityType(s.id)}]})).present()})()}deleteCharityType(s){var a=this;return(0,_.A)(function*(){try{yield a.charityTypeService.deleteCharityType(s),yield a.toaster.presentToast({message:"Service was deleted successfully.",color:"success"})}catch(l){yield a.toaster.presentToast({message:l.code,color:"danger"})}})()}}return(r=o).\u0275fac=function(s){return new(s||r)(e.rXU(p.y),e.rXU(t.hG),e.rXU(y.W))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-charity-types"]],standalone:!0,features:[e.aNF],decls:22,vars:1,consts:[["slot","start"],["slot","end"],["color","primary","fill","solid","routerLink","add"],["name","add-outline"],[1,"ion-no-padding","ion-text-center"],[1,"ion-padding"],["size-xs","3","size-md","2",1,"ion-padding"],[1,"no-entries-row"],["size-xs","3","size-md","2"],[1,"ion-justify-content-center"],[3,"routerLink"],["name","create-outline"],[3,"click"],["name","trash-outline"],["size","12",1,"ion-text-center"]],template:function(s,a){1&s&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Services"),e.k0s(),e.j41(6,"ion-buttons",1)(7,"ion-button",2),e.nrm(8,"ion-icon",3),e.EFF(9," Add Service "),e.k0s()()()(),e.j41(10,"ion-content")(11,"ion-grid",4)(12,"ion-row")(13,"ion-col",5),e.EFF(14,"Service Name"),e.k0s(),e.j41(15,"ion-col",6),e.EFF(16,"Amount"),e.k0s(),e.j41(17,"ion-col",6),e.EFF(18,"Actions"),e.k0s()(),e.Z7z(19,h,11,3,"ion-row",null,e.Vm6,!1,v,3,0,"ion-row",7),e.k0s()()),2&s&&(e.R7$(19),e.Dyx(a.charityTypes))},dependencies:[t.hU,t.ln,t.iq,t.Jm,t.QW,t.lO,t.W9,t.eU,t.BC,t.ai,t.MC,u.Wk],styles:["ion-row[_ngcontent-%COMP%]:first-child{background-color:var(--ion-color-primary);color:#fff}ion-col[_ngcontent-%COMP%]{border-right:solid 1px var(--ion-color-light-shade);border-bottom:solid 1px var(--ion-color-light-shade)}"]}),o})()},1953:(m,d,c)=>{c.d(d,{y:()=>p});var _=c(467),e=c(3953),t=c(3026),u=c(5621);let p=(()=>{var y;class h{constructor(n,r){this.fireStore=n,this.auth=r,this.services=(0,e.vPA)([])}getCharityTypes(){var n=this;return(0,_.A)(function*(){return n.servicesListener?n.services():new Promise(r=>{var o;const i=(0,t.P)((0,t.rJ)(n.fireStore,"services"),(0,t._M)("createdBy","==",null===(o=n.auth.currentUser)||void 0===o?void 0:o.uid),(0,t._M)("isActive","==",!0));n.servicesListener=(0,t.aQ)(i,s=>{const a=s.docs.map(l=>({id:l.id,...l.data()}));n.services.set(a),r(a)})})})()}getCharityTypeById(n){var r=this;return(0,_.A)(function*(){const o=(0,t.H9)(r.fireStore,"services",n),i=yield(0,t.x7)(o);if(i.exists())return{id:i.id,...i.data()};throw{code:"permission-denied"}})()}addCharityType(n){var r=this;return(0,_.A)(function*(){try{var o;const i=(new Date).toISOString(),s={name:n.name,amount:n.amount,createdBy:null===(o=r.auth.currentUser)||void 0===o?void 0:o.uid,createdAt:i,updatedAt:i,isActive:!0};return{id:(yield(0,t.gS)((0,t.rJ)(r.fireStore,"services"),s)).id,...s}}catch(i){throw i}})()}updateCharityType(n,r){var o=this;return(0,_.A)(function*(){try{const i=(0,t.H9)(o.fireStore,"services",n);return r.updatedAt=(new Date).toISOString(),yield(0,t.mZ)(i,r),r}catch(i){throw i}})()}deleteCharityType(n){var r=this;return(0,_.A)(function*(){try{const o={isActive:!1};return yield r.updateCharityType(n,o)}catch(o){throw o}})()}}return(y=h).\u0275fac=function(n){return new(n||y)(e.KVO(t._7),e.KVO(u.Nj))},y.\u0275prov=e.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})()}}]);