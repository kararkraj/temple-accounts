"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[245,807],{5245:(T,p,r)=>{r.r(p),r.d(p,{TemplesPage:()=>u});var _=r(467),e=r(3953),i=r(7920),l=r(70),g=r(9807);function h(a,t){if(1&a){const s=e.RV6();e.j41(0,"ion-row",8)(1,"ion-col",9),e.EFF(2),e.k0s(),e.j41(3,"ion-col",10),e.EFF(4),e.k0s(),e.j41(5,"ion-col",11)(6,"ion-buttons",12)(7,"ion-button",13),e.nrm(8,"ion-icon",14),e.k0s(),e.j41(9,"ion-button",13),e.nrm(10,"ion-icon",15),e.k0s(),e.j41(11,"ion-button",16),e.bIt("click",function(){const o=e.eBV(s).$implicit,d=e.XpG();return e.Njj(d.presentDeleteTempleAlert(o))}),e.nrm(12,"ion-icon",17),e.k0s()()()()}if(2&a){const s=t.$implicit;e.R7$(2),e.JRh(s.name),e.R7$(2),e.JRh(s.address),e.R7$(3),e.Mz_("routerLink","edit/",s.id,""),e.R7$(2),e.Mz_("routerLink","view/",s.id,"")}}function c(a,t){1&a&&(e.j41(0,"ion-row")(1,"ion-col",18),e.EFF(2,"No entries to show."),e.k0s()())}let u=(()=>{var a;class t{constructor(n,o,d){this.templeService=n,this.alertController=o,this.loader=d,this.temples=[],this.updatedTemplesEffect=(0,e.QZP)(()=>{this.templeService.templesUpdatedSignal(),this.getTemples()})}ngOnInit(){}getTemples(){this.templeService.getTemples().then(n=>this.temples=n)}presentDeleteTempleAlert(n){var o=this;return(0,_.A)(function*(){var m;yield(yield o.alertController.create({header:"Confirm delete",subHeader:"Are you sure you want to delete the following record?",message:"Temple name: "+n.name,buttons:[{text:"No, Cancel",role:"cancel",handler:()=>{}},{text:"Yes, Delete",role:"confirm",handler:(m=(0,_.A)(function*(){const E=yield o.loader.create({message:"Deleting temple..."});yield E.present(),o.templeService.deleteTemple(n.id).subscribe({next:()=>E.dismiss()})}),function(){return m.apply(this,arguments)})}]})).present()})()}}return(a=t).\u0275fac=function(n){return new(n||a)(e.rXU(g.f),e.rXU(i.hG),e.rXU(i.Xi))},a.\u0275cmp=e.VBU({type:a,selectors:[["app-temples"]],standalone:!0,features:[e.aNF],decls:22,vars:1,consts:[["slot","start"],["slot","end"],["color","primary","fill","solid","routerLink","add"],["name","add-outline"],[1,"ion-no-padding","ion-text-center"],["size-xs","8","size-sm","4",1,"ion-padding"],[1,"ion-hide-sm-down","ion-padding"],["size-xs","4","size-sm","3","size-lg","2",1,"ion-padding"],[1,"ion-align-items-stretch"],["size-xs","8","size-sm","4"],[1,"ion-hide-sm-down"],["size-xs","4","size-sm","3","size-lg","2"],[1,"ion-justify-content-center"],[3,"routerLink"],["name","create-outline"],["name","eye-outline"],[3,"click"],["name","trash-outline"],["size","12",1,"ion-text-center"]],template:function(n,o){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Temples"),e.k0s(),e.j41(6,"ion-buttons",1)(7,"ion-button",2),e.nrm(8,"ion-icon",3),e.EFF(9," Add Temple "),e.k0s()()()(),e.j41(10,"ion-content")(11,"ion-grid",4)(12,"ion-row")(13,"ion-col",5),e.EFF(14,"Temple Name"),e.k0s(),e.j41(15,"ion-col",6),e.EFF(16,"Temple Address"),e.k0s(),e.j41(17,"ion-col",7),e.EFF(18,"Actions"),e.k0s()(),e.Z7z(19,h,13,6,"ion-row",8,e.Vm6,!1,c,3,0,"ion-row"),e.k0s()()),2&n&&(e.R7$(19),e.Dyx(o.temples))},dependencies:[i.Jm,i.ln,i.lO,i.W9,i.eU,i.BC,i.ai,i.QW,i.MC,i.hU,i.iq,l.Wk],styles:["ion-row[_ngcontent-%COMP%]:first-child{background-color:var(--ion-color-primary);color:#fff}ion-col[_ngcontent-%COMP%]{border-right:solid 1px var(--ion-color-light-shade);border-bottom:solid 1px var(--ion-color-light-shade)}"]}),t})()},9807:(T,p,r)=>{r.d(p,{f:()=>h});var _=r(467),e=r(3953),i=r(1985),l=r(2943),g=r(7291);let h=(()=>{var c;class u{constructor(t){this.storage=t,this.templesUpdatedSignal=(0,e.vPA)(0)}addTemple(t){return new i.c(s=>{this.getTempleNextId().then(n=>{t.id=n,this.storage.get(l.d.TEMPLE.temples).then(o=>{o.push(t),this.storage.set(l.d.TEMPLE.temples,o),this.storage.set(l.d.TEMPLE.lastStoredId,t.id).then(()=>{s.next(t),this.triggerTemplesUpdatedEvent(),s.complete()})})})})}getTemples(){return this.storage.get(l.d.TEMPLE.temples)}getTempleById(t){return new i.c(s=>{this.storage.get(l.d.TEMPLE.temples).then(n=>{const o=n.find(d=>d.id===t);o?s.next(o):s.error("Temple Id not found."),s.complete()})})}getTempleNextId(){var t=this;return(0,_.A)(function*(){return(yield t.storage.get(l.d.TEMPLE.lastStoredId))+1})()}updateTemple(t){const s=t.id;return new i.c(n=>{this.storage.get(l.d.TEMPLE.temples).then(o=>{const d=o.findIndex(m=>m.id===s);o.splice(d,1),o.splice(d,0,t),this.storage.set(l.d.TEMPLE.temples,o).then(()=>{n.next(t),this.triggerTemplesUpdatedEvent(),n.complete()})})})}deleteTemple(t){return new i.c(s=>{this.storage.get(l.d.TEMPLE.temples).then(n=>{const o=n.findIndex(m=>m.id===t),d=n.splice(o,1)[0];this.storage.set(l.d.TEMPLE.temples,n).then(()=>{s.next(d),this.triggerTemplesUpdatedEvent(),s.complete()})})})}triggerTemplesUpdatedEvent(){this.templesUpdatedSignal.update(t=>++t)}}return(c=u).\u0275fac=function(t){return new(t||c)(e.KVO(g.n))},c.\u0275prov=e.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),u})()}}]);