"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[693,953],{8573:(u,h,y)=>{y.r(h),y.d(h,{EditCharityTypePage:()=>p});var d=y(467),e=y(3953),n=y(4341),s=y(7920),_=y(7365),c=y(70);let p=(()=>{var l;class i extends _.AddCharityTypePage{constructor(){super(...arguments),this.router=(0,e.WQX)(c.Ix)}ngOnInit(){this.title="Edit Service",this.charityTypeService.getCharityTypeById(this.charityTypeId).subscribe({next:t=>{this.charityType=t,this.resetForm()},error:t=>{this.toaster.presentToast({message:t,color:"danger"}),this.router.navigate(["tabs/services"],{replaceUrl:!0})}})}onSubmit(){var t=this;return(0,d.A)(function*(){if(t.charityTypeForm.valid&&t.charityTypeForm.dirty){const r=yield t.loading.create({message:"Updating service..."});yield r.present(),t.charityTypeService.updateCharityType({...t.charityTypeForm.getRawValue(),id:t.charityTypeId}).subscribe({next:o=>{t.charityType=o,t.resetForm(),r.dismiss(),t.toaster.presentToast({message:"Service updated successfully.",color:"success"})},error:o=>r.dismiss()})}else t.charityTypeForm.valid?t.toaster.presentToast({message:"Nothing to update."}):t.charityTypeForm.markAllAsTouched()})()}resetForm(){this.charityTypeForm.reset(this.charityType)}}return(l=i).\u0275fac=(()=>{let a;return function(r){return(a||(a=e.xGo(l)))(r||l)}})(),l.\u0275cmp=e.VBU({type:l,selectors:[["app-edit-charity-type"]],standalone:!0,features:[e.Vt3,e.aNF],decls:21,vars:2,consts:[["slot","start"],["defaultHref","tabs/services"],[3,"ngSubmit","formGroup"],["lines","none"],["formControlName","name","label","Service Name *","label-placement","floating","placeholder","Enter service name","type","text","name","name","required","","maxlength","100","helperText","Only a-z, A-Z and 0-9 characters allowed","errorText","Only a-z, A-Z and 0-9 characters allowed"],["formControlName","amount","label","Service Amount *","label-placement","floating","placeholder","1001","type","number","name","amount","required","","min","1"],[1,"ion-no-padding"],["expand","full","type","button","color","light",3,"click"],["expand","full","type","submit"]],template:function(t,r){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.k0s()()(),e.j41(6,"ion-content")(7,"form",2),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(8,"ion-item-group")(9,"ion-item",3),e.nrm(10,"ion-input",4),e.k0s(),e.j41(11,"ion-item",3),e.nrm(12,"ion-input",5),e.k0s()(),e.j41(13,"ion-grid",6)(14,"ion-row")(15,"ion-col")(16,"ion-button",7),e.bIt("click",function(){return r.resetForm()}),e.EFF(17,"Reset"),e.k0s()(),e.j41(18,"ion-col")(19,"ion-button",8),e.EFF(20,"Submit"),e.k0s()()()()()()),2&t&&(e.R7$(5),e.JRh(r.title),e.R7$(2),e.Y8G("formGroup",r.charityTypeForm))},dependencies:[s.Jm,s.hU,s.lO,s.uz,s.jh,s.el,s.ln,s.QW,s.W9,s.eU,s.BC,s.ai,n.X1,n.qT,n.BC,n.cb,n.YS,n.tU,n.j4,n.JD,s.$w]}),i})()},1953:(u,h,y)=>{y.d(h,{y:()=>_});var d=y(3953),e=y(1985),n=y(2943),s=y(7291);let _=(()=>{var c;class p{constructor(i){this.storage=i,this.charityTypesUpdatedSignal=(0,d.vPA)(0)}getCharityTypes(){return this.storage.get(n.d.CHARITY_TYPES.charityTypes)}addCharityType(i){return new e.c(a=>{Promise.all([this.storage.get(n.d.CHARITY_TYPES.lastStoredId),this.getCharityTypes()]).then(t=>{const o={...i,id:t[0]+1};t[1].push(o),Promise.all([this.storage.set(n.d.CHARITY_TYPES.charityTypes,t[1]),this.storage.set(n.d.CHARITY_TYPES.lastStoredId,o.id)]).then(T=>{this.triggerCharityTypesUpdatedSignal(),a.next(o),a.complete()})})})}getCharityTypeById(i){return new e.c(a=>{this.getCharityTypes().then(t=>{const r=t.find(o=>o.id===i);r?a.next(r):a.error("Service Id not found."),a.complete()})})}updateCharityType(i){return new e.c(a=>{this.getCharityTypes().then(t=>{const r=t.findIndex(o=>o.id===i.id);t[r]=i,this.storage.set(n.d.CHARITY_TYPES.charityTypes,t).then(o=>{a.next(i),this.triggerCharityTypesUpdatedSignal(),a.complete()})})})}deleteService(i){return new e.c(a=>{this.getCharityTypes().then(t=>{const r=t.findIndex(T=>T.id===i),o=t.splice(r,1)[0];this.storage.set(n.d.CHARITY_TYPES.charityTypes,t).then(T=>{this.triggerCharityTypesUpdatedSignal(),a.next(o),a.complete()})})})}triggerCharityTypesUpdatedSignal(){this.charityTypesUpdatedSignal.update(i=>++i)}}return(c=p).\u0275fac=function(i){return new(i||c)(d.KVO(s.n))},c.\u0275prov=d.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),p})()}}]);