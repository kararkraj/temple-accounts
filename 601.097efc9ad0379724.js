"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[601],{2601:(U,P,t)=>{t.r(P),t.d(P,{ResetPasswordPage:()=>R});var g=t(467),_=t(5621),r=t(4341),o=t(5751),s=t(3953),p=t(9228),E=t(7990);function M(n,d){1&n&&(s.j41(0,"div",6)(1,"ion-note",9),s.EFF(2,"Password and confirm password do not match"),s.k0s()())}let R=(()=>{var n;class d{constructor(e,a,i,c,l){this.loader=e,this.auth=a,this.router=i,this.activatedRoute=c,this.toaster=l,this.checkPasswordMatch=h=>{var u,m;const f=null===(u=h.get("password"))||void 0===u?void 0:u.value,v=null===(m=h.get("confirmPassword"))||void 0===m?void 0:m.value;return f&&v&&f!==v?{isPasswordMisMatch:!0}:null},this.resetPasswordForm=new r.gE({password:new r.MJ(null,[r.k0.required,r.k0.minLength(8),r.k0.maxLength(99)]),confirmPassword:new r.MJ(null,[r.k0.required,r.k0.maxLength(99)])},{validators:this.checkPasswordMatch})}ngOnInit(){var e=this;return(0,g.A)(function*(){const a=e.activatedRoute.snapshot.queryParams;Object.keys(a).length>0&&a.oobCode||e.router.navigate(["login"],{replaceUrl:!0})})()}confirmResetPassword(){var e=this;return(0,g.A)(function*(){if(e.resetPasswordForm.valid){var a;const i=yield e.loader.create({message:"Updating password..."});yield i.present(),(0,_.R4)(e.auth,e.activatedRoute.snapshot.queryParams.oobCode,null===(a=e.resetPasswordForm.get("password"))||void 0===a?void 0:a.value).then(()=>{e.toaster.presentToast({message:"Password is reset successfully.",color:"success"}),e.router.navigate(["login"],{replaceUrl:!0})}).catch(l=>{console.log(l),e.toaster.presentToast({message:`Error: ${l.code}`,color:"danger"}),e.router.navigate(["login"],{replaceUrl:!0})}).finally(()=>i.dismiss())}else e.resetPasswordForm.hasError("isPasswordMisMatch")?e.toaster.presentToast({message:"Password and confirm password do not match.",color:"danger"}):e.resetPasswordForm.markAllAsTouched()})()}}return(n=d).\u0275fac=function(e){return new(e||n)(s.rXU(o.Xi),s.rXU(_.Nj),s.rXU(p.Ix),s.rXU(p.nX),s.rXU(E.W))},n.\u0275cmp=s.VBU({type:n,selectors:[["app-reset-password"]],standalone:!0,features:[s.aNF],decls:16,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],[1,"ion-padding",3,"ngSubmit","formGroup"],["formControlName","password","label","Password *","labelPlacement","stacked","fill","solid","name","password","type","password","errorText","Use 8 characters or more for your password","required","","maxlength","99","minlength","8",1,"ion-margin-bottom"],["formControlName","confirmPassword","label","Confirm password *","labelPlacement","stacked","fill","solid","name","confirmPassword","type","password","maxlength","99","required","","errorText","Confirm password is required",1,"ion-margin-bottom"],[1,"ion-margin-bottom"],[1,"ion-no-padding"],["type","submit","color","primary","expand","full"],["color","danger"]],template:function(e,a){1&e&&(s.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),s.nrm(3,"ion-menu-button"),s.k0s(),s.j41(4,"ion-title"),s.EFF(5,"Reset password"),s.k0s()()(),s.j41(6,"ion-content",2)(7,"form",3),s.bIt("ngSubmit",function(){return a.confirmResetPassword()}),s.nrm(8,"ion-input",4)(9,"ion-input",5),s.DNE(10,M,3,0,"div",6),s.j41(11,"ion-grid",7)(12,"ion-row")(13,"ion-col")(14,"ion-button",8),s.EFF(15,"Reset password"),s.k0s()()()()()()),2&e&&(s.Y8G("translucent",!0),s.R7$(6),s.Y8G("fullscreen",!0),s.R7$(),s.Y8G("formGroup",a.resetPasswordForm),s.R7$(3),s.vxM(a.resetPasswordForm.hasError("isPasswordMisMatch")?10:-1))},dependencies:[o.lO,o.JI,o.Jm,o.hU,o.ln,o.QW,r.X1,r.qT,r.BC,r.cb,r.YS,r.xh,r.tU,r.j4,r.JD,o.W9,o.eU,o.BC,o.ai,o.$w,o.MC]}),d})()}}]);