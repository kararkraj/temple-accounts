"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[641,953],{641:(v,T,s)=>{s.r(T),s.d(T,{CharityTypesPage:()=>g});var d=s(467),y=s(177),l=s(4341),a=s(5751),u=s(9228),e=s(3953),C=s(1953),E=s(7990);function h(r,o){if(1&r){const i=e.RV6();e.j41(0,"ion-row")(1,"ion-col"),e.EFF(2),e.k0s(),e.j41(3,"ion-col",8),e.EFF(4),e.k0s(),e.j41(5,"ion-col",8)(6,"ion-buttons",9)(7,"ion-button",10),e.nrm(8,"ion-icon",11),e.k0s(),e.j41(9,"ion-button",12),e.bIt("click",function(){const n=e.eBV(i).$implicit,c=e.XpG();return e.Njj(c.presentDeleteCharityTypeAlert(n))}),e.nrm(10,"ion-icon",13),e.k0s()()()()}if(2&r){const i=o.$implicit;e.R7$(2),e.JRh(i.name),e.R7$(2),e.JRh(i.amount),e.R7$(3),e.FS9("routerLink","edit/"+i.id)}}function p(r,o){1&r&&(e.j41(0,"ion-row",7)(1,"ion-col",14),e.EFF(2,"No entries to show."),e.k0s()())}let g=(()=>{var r;class o{constructor(t,n,c,_){this.charityTypeService=t,this.alertController=n,this.loader=c,this.toaster=_}ngOnInit(){}ionViewWillEnter(){this.getCharityTypes()}getCharityTypes(){var t=this;return(0,d.A)(function*(){t.charityTypes=yield t.charityTypeService.getCharityTypes()})()}presentDeleteCharityTypeAlert(t){var n=this;return(0,d.A)(function*(){yield(yield n.alertController.create({header:"Confirm delete",subHeader:"Are you sure you want to delete the following record?",message:"Service name: "+t.name,buttons:[{text:"No, Cancel",role:"cancel",handler:()=>{}},{text:"Yes, Delete",role:"confirm",handler:()=>n.deleteCharityType(t.id)}]})).present()})()}deleteCharityType(t){var n=this;return(0,d.A)(function*(){const c=yield n.loader.create({message:"Deleting service..."});yield c.present(),yield n.charityTypeService.deleteCharityType(t),yield n.toaster.presentToast({message:"Service was deleted successfully.",color:"success"}),yield c.dismiss(),n.getCharityTypes()})()}}return(r=o).\u0275fac=function(t){return new(t||r)(e.rXU(C.y),e.rXU(a.hG),e.rXU(a.Xi),e.rXU(E.W))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-charity-types"]],standalone:!0,features:[e.aNF],decls:22,vars:1,consts:[["slot","start"],["slot","end"],["color","primary","fill","solid","routerLink","add"],["name","add-outline"],[1,"ion-no-padding","ion-text-center"],[1,"ion-padding"],["size-xs","3","size-md","2",1,"ion-padding"],[1,"no-entries-row"],["size-xs","3","size-md","2"],[1,"ion-justify-content-center"],[3,"routerLink"],["name","create-outline"],[3,"click"],["name","trash-outline"],["size","12",1,"ion-text-center"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Services"),e.k0s(),e.j41(6,"ion-buttons",1)(7,"ion-button",2),e.nrm(8,"ion-icon",3),e.EFF(9," Add Service "),e.k0s()()()(),e.j41(10,"ion-content")(11,"ion-grid",4)(12,"ion-row")(13,"ion-col",5),e.EFF(14,"Service Name"),e.k0s(),e.j41(15,"ion-col",6),e.EFF(16,"Amount"),e.k0s(),e.j41(17,"ion-col",6),e.EFF(18,"Actions"),e.k0s()(),e.Z7z(19,h,11,3,"ion-row",null,e.Vm6,!1,p,3,0,"ion-row",7),e.k0s()()),2&t&&(e.R7$(19),e.Dyx(n.charityTypes))},dependencies:[a.hU,a.ln,a.iq,a.Jm,a.QW,a.lO,a.W9,a.eU,a.BC,a.ai,y.MD,l.YN,a.MC,u.Wk],styles:["ion-row[_ngcontent-%COMP%]:first-child{background-color:var(--ion-color-primary);color:#fff}ion-col[_ngcontent-%COMP%]{border-right:solid 1px var(--ion-color-light-shade);border-bottom:solid 1px var(--ion-color-light-shade)}"]}),o})()},1953:(v,T,s)=>{s.d(T,{y:()=>E});var d=s(467),y=s(4262),l=s(2943),a=s(3953),u=s(7291),e=s(5621),C=s(3606);let E=(()=>{var h;class p{constructor(r,o,i,t){this.storage=r,this.fireStore=o,this.auth=i,this.network=t}getCharityTypes(){var r=this;return(0,d.A)(function*(){const o=yield r.storage.get(l.d.CHARITY_TYPES.charityTypes);if(null===o){var i;const t=(0,y.P)((0,y.rJ)(r.fireStore,"charityTypes"),(0,y._M)("createdBy","==",null===(i=r.auth.currentUser)||void 0===i?void 0:i.uid)),c=(yield(0,y.GG)(t)).docs.map(_=>({id:_.id,..._.data()}));return yield r.storage.set(l.d.CHARITY_TYPES.charityTypes,c),c}return o})()}getCharityTypeById(r){var o=this;return(0,d.A)(function*(){const t=(yield o.storage.get(l.d.CHARITY_TYPES.charityTypes)).find(n=>n.id===r);if(t)return t;throw{code:"permission-denied"}})()}addCharityType(r){var o=this;return(0,d.A)(function*(){try{var i;yield o.network.isNetworkConnected();const t=(new Date).toISOString(),n={name:r.name,amount:r.amount,createdBy:null===(i=o.auth.currentUser)||void 0===i?void 0:i.uid,createdAt:t,updatedAt:t},_={id:(yield(0,y.gS)((0,y.rJ)(o.fireStore,"charityTypes"),n)).id,...n},m=yield o.storage.get(l.d.CHARITY_TYPES.charityTypes);return m.push(_),yield o.storage.set(l.d.CHARITY_TYPES.charityTypes,m),_}catch(t){throw t}})()}updateCharityType(r,o){var i=this;return(0,d.A)(function*(){try{yield i.network.isNetworkConnected();const t=(0,y.H9)(i.fireStore,"charityTypes",r);o.updatedAt=(new Date).toISOString(),yield(0,y.mZ)(t,o);const n=yield i.storage.get(l.d.CHARITY_TYPES.charityTypes),c=n.findIndex(_=>_.id===r);return n[c]={...n[c],...o},yield i.storage.set(l.d.CHARITY_TYPES.charityTypes,n),n[c]}catch(t){throw t}})()}deleteCharityType(r){var o=this;return(0,d.A)(function*(){try{yield o.network.isNetworkConnected(),yield(0,y.kd)((0,y.H9)(o.fireStore,"charityTypes",r));const i=yield o.storage.get(l.d.CHARITY_TYPES.charityTypes),t=i.findIndex(c=>c.id===r),n=i.splice(t,1)[0];return yield o.storage.set(l.d.CHARITY_TYPES.charityTypes,i),n}catch(i){throw i}})()}}return(h=p).\u0275fac=function(r){return new(r||h)(a.KVO(u.n),a.KVO(y._7),a.KVO(e.Nj),a.KVO(C.A))},h.\u0275prov=a.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),p})()}}]);