<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>My Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" [fullscreen]="true">

  <form [formGroup]="myProfileForm" (ngSubmit)="onSubmit()">

    <ion-grid class="ion-no-padding ion-margin-top">

      <ion-row class="ion-justify-content-center">
        <ion-col size="auto">
          <ion-avatar class="ion-margin-bottom">
            <img alt="Silhouette of a person's head" [src]="user.photoURL || './../../../assets/avatar.svg'" />
          </ion-avatar>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-input formControlName="displayName" label="Display Name *" labelPlacement="stacked" fill="solid"
            name="displayName" type="text" spellcheck="false" autocapitalize="off"
            helperText="Only a-z, A-Z and 0-9 characters allowed" errorText="Only a-z, A-Z and 0-9 characters allowed"
            required minlength="2" maxlength="99" class="ion-margin-bottom"></ion-input>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col>
          <ion-input formControlName="email" label="Email *" labelPlacement="stacked" fill="solid" name="email"
            type="text" spellcheck="false" autocapitalize="off" errorText="Invalid Email" required maxlength="99"
            placeholder="example@domain.com" class="ion-margin-bottom">
          </ion-input>
        </ion-col>
      </ion-row>

      <ion-row class="ion-margin-bottom action-buttons">
        <ion-col>
          <ion-button type="button" color="danger" id="open-modal" expand="full">Delete account</ion-button>
        </ion-col>
        <ion-col>
          <ion-button type="button" color="light" (click)="resetForm()" expand="full">Reset</ion-button>
        </ion-col>
        <ion-col>
          <ion-button type="submit" color="primary" expand="full">Submit</ion-button>
        </ion-col>
      </ion-row>

    </ion-grid>

  </form>

  <ion-modal trigger="open-modal" (willDismiss)="onWillDismiss($event)">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-button (click)="cancel()">Cancel</ion-button>
          </ion-buttons>
          <ion-title>Re-authenticate</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <h4 class="ion-no-margin ion-margin-bottom">Please re-authenticate to confirm deletion of your account.</h4>
        <form (ngSubmit)="reAuthWithPassword()">
          <ion-grid class="ion-no-padding">
            <ion-row>
              <ion-col>
                <ion-input label="Password" labelPlacement="stacked" fill="solid" [(ngModel)]="reAuthPassword"
                  name="password" type="password" errorText="Password is required" required maxlength="99"
                  class="ion-margin-bottom" placeholder="********">
                </ion-input>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col>
                <ion-button type="submit" color="primary" expand="full">Submit</ion-button>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col>
                <ion-button type="button" (click)="reAuthWithGoogle()" color="light" expand="full">
                  <ion-icon slot="start" src="./../../../assets/icon/google.svg" class="ion-margin-end"></ion-icon>
                  <span>Authenticate with Google</span>
                </ion-button>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col>
                <ion-button type="button" (click)="reAuthWithFacebook()" color="light" expand="full">
                  <ion-icon slot="start" src="./../../../assets/icon/facebook.svg" class="ion-margin-end"></ion-icon>
                  <span>Authenticate with Facebook</span>
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-grid>
        </form>
      </ion-content>
    </ng-template>
  </ion-modal>

</ion-content>